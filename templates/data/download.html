{% extends "scrap/base.html" %}

{% block data_home %}
            {% for message in messages %} 
            <div class="alert alert-{{ message.tags}} alert-dismissible fade show " role="alert">
            <strong>Hey Hey!</strong> {{ message }}.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            {% endfor %}
            <p>Kindly Fill These Details For Scraping Results</p>
            <div class="dataset-section">
                <h4>Datasets</h4>
                <p>Display your datasets here.</p>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>File Name</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>{{ file_name}}</td>
                                <td>{{ file_size}}</td>
                                <td>
                                    <a href="{% url 'file_download' file_name %}" class="btn btn-danger btn-sm">Download</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
     

            {% if messages %}
                <script>
                    let jsonData = null;
                    {% for message in messages %}
                        try {
                            jsonData = JSON.parse({{ message|safe|escapejs }});
                        } catch (e) {
                            console.error("Error parsing message JSON:", e);
                        }
                    {% endfor %}
                    console.log(jsonData); // Check the parsed JSON data in the browser console
                </script>
            {% endif %}
            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                $('.alert').alert()
                })
            </script> 

            
{% endblock  %}}


